(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1008:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(55),o=a.n(c),i=a(553),l=a.n(i),s=a(544),u=a(487),d=a(454),E=a(607),m=a(182),f=a(199),h=a(180),p=a(82),b=a(181),y=a(183),v=a(119),g=a(289),O=a(543),j=a(290),w=a(99),k=a(291),T=a(257),_=a(292),D=a(221),A=a(352),N=a(353),C=a(357),S=a(354),P=a(362),L=a(8),I=a(38),R=a.n(I),M=a(604),Y=a.n(M),x=a(61),G=a(43),K=function(e){function t(){var e,a;Object(A.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(C.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(){var e=a.props,t=e.push,r=e.record,n=e.showNotification;fetch("http://localhost:8080/bill/".concat(r.id,"/download.xls")).then(function(e){return e.blob().then(function(e){var a=document.createElement("a"),r=window.URL.createObjectURL(e);a.href=r,a.download="download.xls",a.click(),window.URL.revokeObjectURL(r),n("\u6210\u529f\uff1a\u4e0b\u8f7d\u4efb\u52a1"),t("/bill")})}).catch(function(e){n("\u9519\u8bef: \u4e0b\u8f7d\u9047\u5230\u95ee\u9898","error")})},a}return Object(P.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return n.a.createElement(R.a,{color:"primary",onClick:this.handleClick},n.a.createElement(Y.a,null))}}]),t}(r.Component),F=Object(L.b)(null,{showNotification:x.d,push:G.c})(K),U=a(3),B=a(4),J=a.n(B),q=Object(U.withStyles)({first:{color:"green"},second:{color:"red"}})(function(e){var t,a=e.classes,r=Object(E.a)(e,["classes"]);return n.a.createElement(m.a,Object.assign({className:J()((t={},Object(d.a)(t,a.first,r.record[r.source]<1e6),Object(d.a)(t,a.second,r.record[r.source]>=1e6),t))},r))});q.defaultProps=m.a.defaultProps;var z=function(e){return n.a.createElement(f.b,e,n.a.createElement(h.a,{rowClick:"edit"},n.a.createElement(p.a,{source:"id"}),n.a.createElement(b.a,{source:"signdate"}),n.a.createElement(p.a,{source:"material"}),n.a.createElement(p.a,{source:"size"}),n.a.createElement(p.a,{source:"unit"}),n.a.createElement(m.a,{source:"num"}),n.a.createElement(m.a,{source:"price"}),n.a.createElement(q,{source:"total"}),n.a.createElement(y.a,{source:"pid",reference:"company",linkType:"show"},n.a.createElement(p.a,{source:"name"})),n.a.createElement(y.a,{source:"bid",reference:"company",linkType:"show"},n.a.createElement(p.a,{source:"name"})),n.a.createElement(F,null)))},H=function(e){return n.a.createElement(v.b,e,n.a.createElement(g.a,null,n.a.createElement(O.a,{source:"id"}),n.a.createElement(j.a,{source:"signdate"}),n.a.createElement(w.a,{source:"material"}),n.a.createElement(w.a,{source:"size"}),n.a.createElement(w.a,{source:"unit"}),n.a.createElement(k.a,{source:"num"}),n.a.createElement(k.a,{source:"price"}),n.a.createElement(k.a,{source:"total"})))},W=function(e){return n.a.createElement(f.b,e,n.a.createElement(h.a,{rowClick:"edit"},n.a.createElement(p.a,{source:"id"}),n.a.createElement(p.a,{source:"name"}),n.a.createElement(p.a,{source:"address"}),n.a.createElement(p.a,{source:"tel"}),n.a.createElement(p.a,{source:"bank"}),n.a.createElement(p.a,{source:"account"})))},$=function(e){return n.a.createElement(v.b,e,n.a.createElement(g.a,null,n.a.createElement(O.a,{source:"id"}),n.a.createElement(w.a,{source:"name"}),n.a.createElement(w.a,{source:"address"}),n.a.createElement(w.a,{source:"bank"}),n.a.createElement(w.a,{source:"tel"}),n.a.createElement(w.a,{source:"account"})))},Q=function(e){return n.a.createElement(T.b,e,n.a.createElement(g.a,null,n.a.createElement(w.a,{source:"id"}),n.a.createElement(w.a,{source:"name"}),n.a.createElement(w.a,{source:"address"}),n.a.createElement(w.a,{source:"bank"}),n.a.createElement(w.a,{source:"tel"}),n.a.createElement(w.a,{source:"account"})))},V=a(605),X=a.n(V),Z=a(495),ee=a(552),te=a(51),ae=a(191),re=a(37),ne=a(441),ce=a(319),oe=a(56),ie=a(335),le=a.n(ie),se=a(606),ue=a.n(se),de=a(330),Ee=a.n(de),me=a(331),fe=a.n(me),he=a(332),pe=a.n(he),be=a(333),ye=a.n(be),ve=function(e){function t(){var e,a;Object(A.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(C.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).state={error:!1,showDialog:!1},a.handleClick=function(){a.setState({showDialog:!0})},a.handleCloseClick=function(){a.setState({showDialog:!1})},a.handleSaveClick=function(){(0,a.props.submit)("company-quick-create")},a.handleSubmit=function(e){var t=a.props,r=t.change,n=t.crudGetMatching,c=t.fetchStart,o=t.fetchEnd,i=t.showNotification;c();var l={method:"post",body:JSON.stringify(e),headers:{"content-type":"application/json"}};fetch("http://localhost:8080/company",l).then(function(e){return e.json()}).then(function(e){n("company","bill@pid",{page:1,perPage:25},{field:"id",order:"DESC"},{}),n("company","bill@bid",{page:1,perPage:25},{field:"id",order:"DESC"},{}),r(ae.a,"pid",e.id),r(ae.a,"bid",e.id),a.setState({showDialog:!1}),i("\u6dfb\u52a0\u6210\u529f")}).catch(function(e){i(e.message,"error")}).finally(function(){o()})},a}return Object(P.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.state.showDialog,t=this.props.isSubmitting;return n.a.createElement(r.Fragment,null,n.a.createElement(re.a,{onClick:this.handleClick},n.a.createElement(le.a,null)),n.a.createElement(Ee.a,{fullWidth:!0,open:e,onClose:this.handleCloseClick,"aria-label":"\u65b0\u5efa\u516c\u53f8"},n.a.createElement(fe.a,null,"\u65b0\u5efa\u516c\u53f8"),n.a.createElement(pe.a,null,n.a.createElement(g.a,{form:"company-quick-create",resource:"company",onSubmit:this.handleSubmit,toolbar:null},n.a.createElement(w.a,{source:"id"}),n.a.createElement(w.a,{source:"name"}),n.a.createElement(w.a,{source:"address"}),n.a.createElement(w.a,{source:"bank"}),n.a.createElement(w.a,{source:"tel"}),n.a.createElement(w.a,{source:"account"}))),n.a.createElement(ye.a,null,n.a.createElement(ne.a,{saving:t,onClick:this.handleSaveClick}),n.a.createElement(re.a,{label:"ra.action.cancel",onClick:this.handleCloseClick},n.a.createElement(ue.a,null)))))}}]),t}(r.Component),ge={change:te.b,crudGetMatching:ce.e,fetchEnd:oe.f,fetchStart:oe.h,showNotification:x.d,submit:te.e},Oe=Object(L.b)(function(e){return{isSubmitting:Object(ee.a)("company-quick-create")(e)}},ge)(ve),je=function(e){return n.a.createElement(r.Fragment,null,n.a.createElement(_.a,e,n.a.createElement(D.a,{optionText:"name"})),n.a.createElement(Oe,null))},we=function(e){return n.a.createElement(T.b,e,n.a.createElement(g.a,null,n.a.createElement(j.a,{source:"signdate"}),n.a.createElement(w.a,{source:"material"}),n.a.createElement(w.a,{source:"size"}),n.a.createElement(w.a,{source:"unit"}),n.a.createElement(k.a,{source:"num"}),n.a.createElement(k.a,{source:"price"}),n.a.createElement(k.a,{source:"total"}),n.a.createElement(je,{source:"pid",reference:"company",validate:Object(Z.i)()}),n.a.createElement(je,{source:"bid",reference:"company",validate:Object(Z.i)()})))},ke={cn:X.a},Te=function(e){return ke[e]},_e=function(){return n.a.createElement(s.a,{locale:"cn",i18nProvider:Te,dataProvider:l()("http://localhost:8080")},n.a.createElement(u.a,{name:"bill",list:z,edit:H,create:we}),n.a.createElement(u.a,{name:"company",list:W,edit:$,create:Q}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},545:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EMBEDDED_KEY="_embedded",t.PAGINATION_KEY="page",t.LOCATION_HEADER="Location",t.LINKS_KEY="_links"},553:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.generateHttpClient=function(e,t){};var n=a(632),c=a(104),o=a(545);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||0===Object.keys(e).length)return"";var t,a,c,o=e.pagination,i=(o=void 0===o?{}:o).page,l=o.perPage,s=e.sort,u=(s=void 0===s?{}:s).field,d=s.order,E=e.filter,m=r((t={page:i?i-1:void 0,size:l,sort:"".concat(u,",").concat(d)},a in t?Object.defineProperty(t,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[a]=c,t),E);return"?"+(0,n.queryParameters)(m)}function l(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments[5];return Promise.all(r.ids.map(function(r){return t(e+"/"+a+"/"+r,n)})).then(c)}function s(e,t,a,c){var l=c.ids,s=void 0===l?[]:l,u=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(c,["ids"]);return Array.isArray(c.ids)?Promise.all(s.map(function(r){return t(e+"/"+a+"/"+r+i(u))})).then(function(e){return{data:e.map(function(e){var t=e.json;return r({},t,{id:(0,n.extractIDFromResourceSelfLink)(t[o.LINKS_KEY].self.href)})})}}):Promise.reject("Unable to process request.")}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.fetchJson;return function(a,u,d){if(a===c.GET_MANY)return s(e,t,u,d);if(a===c.UPDATE_MANY)return function(e,t,a,c){return l(e,t,a,c,{method:"PUT",body:c.data},function(e){return{data:e.map(function(e){return r({id:(0,n.extractIDFromResourceSelfLink)(e.headers.get(o.LOCATION_HEADER))},c.data)})}})}(e,t,u,d);if(a===c.DELETE_MANY)return function(e,t,a,r){return l(e,t,a,r,{method:"DELETE"},function(e){return{data:e.map(function(e){return{id:(0,n.extractIDFromResourceSelfLink)(e.headers.get(o.LOCATION_HEADER))}})}})}(e,t,u,d);var E=function(e,t,a,r,n){var o=e+"/"+r;switch(a){case c.GET_LIST:return{url:""+o+i(n),options:{}};case c.GET_ONE:return{url:o+"/"+n.id,options:{}};case c.CREATE:return console.log(n),{url:""+o,options:{method:"POST",body:JSON.stringify(n.data)}};case c.UPDATE:return{url:o+"/"+n.id,options:{method:"PUT",body:JSON.stringify(n.data)}};case c.DELETE:return{url:o+"/"+n.id,options:{method:"DELETE"}};case c.GET_MANY_REFERENCE:return{url:e+"/"+n.target+"/"+n.id+"/"+r+i(n)};default:throw new Error("Not Implemented")}}(e,0,a,u,d),m=E.url,f=E.options;return t(m,f,u,a).then(function(e){return function(e,t,a,i){var l,s=e.json;switch(e.headers,t){case c.GET_LIST:return{data:s[o.EMBEDDED_KEY][a],total:s[o.PAGINATION_KEY].totalElements};case c.GET_MANY_REFERENCE:var u=s[o.EMBEDDED_KEY][a];return{data:u,total:(l=u,Array.isArray(l)?l.length:0)};case c.GET_ONE:return{data:s};case c.UPDATE:return{data:r({id:i.id},i.data)};case c.CREATE:return console(e),{data:r({},s,{id:(0,n.extractIDFromResourceSelfLink)(s[o.LINKS_KEY].self.href)})};case c.DELETE:return{data:{id:i.id}};default:throw new Error("Not Implemented")}}(e,a,u,d)})}}},627:function(e,t,a){e.exports=a(1008)},632:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.flattenObject=t.queryParameters=t.fetchJson=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.extractIDFromResourceSelfLink=d;var n,c=a(104),o=a(1006),i=(n=o)&&n.__esModule?n:{default:n},l=a(129),s=a(545);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e){return e&&e.match(/[\w\-]+$/)[0]}function E(e){return r({},e,{id:d(e[s.LINKS_KEY].self.href)})}t.fetchJson=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],n=arguments[3],o=t.headers||new Headers({Accept:"application/json"});return o.has("Content-Type")||t&&t.body&&t.body instanceof FormData||o.set("Content-Type","application/json"),t.user&&t.user.token&&o.set("Authorization",t.user.token),fetch(e,r({},t,{headers:o})).then(function(e){return[204].includes(e.status)?{status:e.status,statusText:e.statusText,headers:e.headers,body:{}}:e.text().then(function(t){return{status:e.status,statusText:e.statusText,headers:e.headers,body:t}})}).then(function(e){return function(e,t,a){var n,o=e.status,l=e.statusText,d=e.headers,m=e.body,f=void 0;try{f=JSON.parse(m)}catch(h){}if(o<200||o>=300)return Promise.reject(new i.default(f&&f.message||l,o,f));switch(a){case c.GET_ONE:return{status:o,headers:d,body:m,json:E(f)};case c.GET_LIST:case c.GET_MANY_REFERENCE:return{status:o,headers:d,body:m,json:r({},f,u({},s.EMBEDDED_KEY,u({},t,(n=f[s.EMBEDDED_KEY][t],n.map(E)))))};case c.GET_MANY:return{status:o,headers:d,body:m,json:E(f)};default:return{status:o,headers:d,body:m,json:f}}}(e,a,n)})},t.queryParameters=l.stringify,t.flattenObject=function t(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(t){if(!t)return!1;var a=Array.isArray(t),r=e.isBuffer(t),n="[object Object]"===Object.prototype.toString.call(t),c=!!Object.keys(t).length;return!a&&!r&&n&&c}(a)?Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(Object.keys(a).map(function(e){return t(a[e],r.concat([e]))})))):r.length?u({},r.join("."),a):a}}).call(this,a(455).Buffer)}},[[627,1,2]]]);
//# sourceMappingURL=main.7d1c42ef.chunk.js.map